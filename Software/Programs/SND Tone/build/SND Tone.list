ca65 V2.18 - N/A
Main file   : ./src/SND Tone.asm
Current file: ./src/SND Tone.asm

000000r 1               .setcpu "65C02"
000000r 1               
000000r 1               .segment "ZEROPAGE"
000000r 1               .segment "STACK"
000000r 1               .segment "INPUT_BUFFER"
000000r 1               .segment "KERNAL_VARS"
000000r 1               .segment "USER_VARS"
000000r 1               .segment "CODE"
000000r 1               
000000r 1               PORTB   = $9800
000000r 1               PORTA   = $9801
000000r 1               DDRB    = $9802
000000r 1               DDRA    = $9803
000000r 1               PCR     = $980C
000000r 1               
000000r 1               AY_BC1H  = %11100000       ; VIA PCR CA2
000000r 1               AY_BC1L  = %11000000       ; VIA PCR CA2
000000r 1               AY_BDIRH = %00001110       ; VIA PCR CB2
000000r 1               AY_BDIRL = %00001100       ; VIA PCR CB2
000000r 1               
000000r 1               reset:
000000r 1  A9 FF          lda #%11111111          ; Set all pins on port A and B to outputs
000002r 1  8D 03 98       sta DDRA
000005r 1  8D 02 98       sta DDRB
000008r 1  A9 00          lda #$00
00000Ar 1  8D 01 98       sta PORTA
00000Dr 1               
00000Dr 1  20 rr rr       jsr ay_inactive
000010r 1               
000010r 1  20 rr rr       jsr ay_latch
000013r 1  A9 07          lda #$07
000015r 1  8D 01 98       sta PORTA
000018r 1  20 rr rr       jsr ay_inactive
00001Br 1  20 rr rr       jsr ay_write
00001Er 1  A9 3E          lda #%00111110
000020r 1  8D 01 98       sta PORTA
000023r 1  20 rr rr       jsr ay_inactive
000026r 1               
000026r 1  20 rr rr       jsr ay_latch
000029r 1  A9 08          lda #$08
00002Br 1  8D 01 98       sta PORTA
00002Er 1  20 rr rr       jsr ay_inactive
000031r 1  20 rr rr       jsr ay_write
000034r 1  A9 0F          lda #%00001111
000036r 1  8D 01 98       sta PORTA
000039r 1  20 rr rr       jsr ay_inactive
00003Cr 1               
00003Cr 1               loop:
00003Cr 1  20 rr rr       jsr ay_latch
00003Fr 1  A9 00          lda #$00
000041r 1  8D 01 98       sta PORTA
000044r 1  20 rr rr       jsr ay_inactive
000047r 1  20 rr rr       jsr ay_write
00004Ar 1  A9 DF          lda #223
00004Cr 1  8D 01 98       sta PORTA
00004Fr 1  20 rr rr       jsr ay_inactive
000052r 1               
000052r 1  20 rr rr       jsr ay_latch
000055r 1  A9 01          lda #$01
000057r 1  8D 01 98       sta PORTA
00005Ar 1  20 rr rr       jsr ay_inactive
00005Dr 1  20 rr rr       jsr ay_write
000060r 1  A9 01          lda #1
000062r 1  8D 01 98       sta PORTA
000065r 1  20 rr rr       jsr ay_inactive
000068r 1               
000068r 1  20 rr rr       jsr delay
00006Br 1  20 rr rr       jsr delay
00006Er 1  20 rr rr       jsr delay
000071r 1  20 rr rr       jsr delay
000074r 1               
000074r 1  20 rr rr       jsr ay_latch
000077r 1  A9 00          lda #$00
000079r 1  8D 01 98       sta PORTA
00007Cr 1  20 rr rr       jsr ay_inactive
00007Fr 1  20 rr rr       jsr ay_write
000082r 1  A9 AA          lda #170
000084r 1  8D 01 98       sta PORTA
000087r 1  20 rr rr       jsr ay_inactive
00008Ar 1               
00008Ar 1  20 rr rr       jsr ay_latch
00008Dr 1  A9 01          lda #$01
00008Fr 1  8D 01 98       sta PORTA
000092r 1  20 rr rr       jsr ay_inactive
000095r 1  20 rr rr       jsr ay_write
000098r 1  A9 01          lda #1
00009Ar 1  8D 01 98       sta PORTA
00009Dr 1  20 rr rr       jsr ay_inactive
0000A0r 1               
0000A0r 1  20 rr rr       jsr delay
0000A3r 1  20 rr rr       jsr delay
0000A6r 1  20 rr rr       jsr delay
0000A9r 1  20 rr rr       jsr delay
0000ACr 1               
0000ACr 1  20 rr rr       jsr ay_latch
0000AFr 1  A9 00          lda #$00
0000B1r 1  8D 01 98       sta PORTA
0000B4r 1  20 rr rr       jsr ay_inactive
0000B7r 1  20 rr rr       jsr ay_write
0000BAr 1  A9 7B          lda #123
0000BCr 1  8D 01 98       sta PORTA
0000BFr 1  20 rr rr       jsr ay_inactive
0000C2r 1               
0000C2r 1  20 rr rr       jsr ay_latch
0000C5r 1  A9 01          lda #$01
0000C7r 1  8D 01 98       sta PORTA
0000CAr 1  20 rr rr       jsr ay_inactive
0000CDr 1  20 rr rr       jsr ay_write
0000D0r 1  A9 01          lda #1
0000D2r 1  8D 01 98       sta PORTA
0000D5r 1  20 rr rr       jsr ay_inactive
0000D8r 1               
0000D8r 1  20 rr rr       jsr delay
0000DBr 1  20 rr rr       jsr delay
0000DEr 1  20 rr rr       jsr delay
0000E1r 1  20 rr rr       jsr delay
0000E4r 1               
0000E4r 1  20 rr rr       jsr ay_latch
0000E7r 1  A9 00          lda #$00
0000E9r 1  8D 01 98       sta PORTA
0000ECr 1  20 rr rr       jsr ay_inactive
0000EFr 1  20 rr rr       jsr ay_write
0000F2r 1  A9 66          lda #102
0000F4r 1  8D 01 98       sta PORTA
0000F7r 1  20 rr rr       jsr ay_inactive
0000FAr 1               
0000FAr 1  20 rr rr       jsr ay_latch
0000FDr 1  A9 01          lda #$01
0000FFr 1  8D 01 98       sta PORTA
000102r 1  20 rr rr       jsr ay_inactive
000105r 1  20 rr rr       jsr ay_write
000108r 1  A9 01          lda #1
00010Ar 1  8D 01 98       sta PORTA
00010Dr 1  20 rr rr       jsr ay_inactive
000110r 1               
000110r 1  20 rr rr       jsr delay
000113r 1  20 rr rr       jsr delay
000116r 1  20 rr rr       jsr delay
000119r 1  20 rr rr       jsr delay
00011Cr 1               
00011Cr 1  20 rr rr       jsr ay_latch
00011Fr 1  A9 00          lda #$00
000121r 1  8D 01 98       sta PORTA
000124r 1  20 rr rr       jsr ay_inactive
000127r 1  20 rr rr       jsr ay_write
00012Ar 1  A9 3F          lda #63
00012Cr 1  8D 01 98       sta PORTA
00012Fr 1  20 rr rr       jsr ay_inactive
000132r 1               
000132r 1  20 rr rr       jsr ay_latch
000135r 1  A9 01          lda #$01
000137r 1  8D 01 98       sta PORTA
00013Ar 1  20 rr rr       jsr ay_inactive
00013Dr 1  20 rr rr       jsr ay_write
000140r 1  A9 01          lda #1
000142r 1  8D 01 98       sta PORTA
000145r 1  20 rr rr       jsr ay_inactive
000148r 1               
000148r 1  20 rr rr       jsr delay
00014Br 1  20 rr rr       jsr delay
00014Er 1  20 rr rr       jsr delay
000151r 1  20 rr rr       jsr delay
000154r 1               
000154r 1  20 rr rr       jsr ay_latch
000157r 1  A9 00          lda #$00
000159r 1  8D 01 98       sta PORTA
00015Cr 1  20 rr rr       jsr ay_inactive
00015Fr 1  20 rr rr       jsr ay_write
000162r 1  A9 1C          lda #28
000164r 1  8D 01 98       sta PORTA
000167r 1  20 rr rr       jsr ay_inactive
00016Ar 1               
00016Ar 1  20 rr rr       jsr ay_latch
00016Dr 1  A9 01          lda #$01
00016Fr 1  8D 01 98       sta PORTA
000172r 1  20 rr rr       jsr ay_inactive
000175r 1  20 rr rr       jsr ay_write
000178r 1  A9 01          lda #1
00017Ar 1  8D 01 98       sta PORTA
00017Dr 1  20 rr rr       jsr ay_inactive
000180r 1               
000180r 1  20 rr rr       jsr delay
000183r 1  20 rr rr       jsr delay
000186r 1  20 rr rr       jsr delay
000189r 1  20 rr rr       jsr delay
00018Cr 1               
00018Cr 1  20 rr rr       jsr ay_latch
00018Fr 1  A9 00          lda #$00
000191r 1  8D 01 98       sta PORTA
000194r 1  20 rr rr       jsr ay_inactive
000197r 1  20 rr rr       jsr ay_write
00019Ar 1  A9 FD          lda #253
00019Cr 1  8D 01 98       sta PORTA
00019Fr 1  20 rr rr       jsr ay_inactive
0001A2r 1               
0001A2r 1  20 rr rr       jsr ay_latch
0001A5r 1  A9 01          lda #$01
0001A7r 1  8D 01 98       sta PORTA
0001AAr 1  20 rr rr       jsr ay_inactive
0001ADr 1  20 rr rr       jsr ay_write
0001B0r 1  A9 00          lda #0
0001B2r 1  8D 01 98       sta PORTA
0001B5r 1  20 rr rr       jsr ay_inactive
0001B8r 1               
0001B8r 1  20 rr rr       jsr delay
0001BBr 1  20 rr rr       jsr delay
0001BEr 1  20 rr rr       jsr delay
0001C1r 1  20 rr rr       jsr delay
0001C4r 1               
0001C4r 1  4C rr rr       jmp loop
0001C7r 1               
0001C7r 1               delay:
0001C7r 1  DA             phx
0001C8r 1  A2 FF          ldx #$FF
0001CAr 1               delay_loop:
0001CAr 1  CA             dex
0001CBr 1  D0 FD          bne delay_loop
0001CDr 1  FA             plx
0001CEr 1  60             rts
0001CFr 1               
0001CFr 1               ay_inactive:
0001CFr 1  DA             phx
0001D0r 1  A2 CC          ldx #(AY_BDIRL | AY_BC1L)   ; BDIR LOW, BC1 LOW
0001D2r 1  8E 0C 98       stx PCR
0001D5r 1  FA             plx
0001D6r 1  60             rts
0001D7r 1               
0001D7r 1               ay_latch:
0001D7r 1  DA             phx
0001D8r 1  A2 EE          ldx #(AY_BDIRH | AY_BC1H)   ; BDIR HIGH, BC1 HIGH
0001DAr 1  8E 0C 98       stx PCR
0001DDr 1  FA             plx
0001DEr 1  60             rts
0001DFr 1               
0001DFr 1               ay_write:
0001DFr 1  DA             phx
0001E0r 1  A2 CE          ldx #(AY_BDIRH | AY_BC1L)   ; BDIR HIGH, BC1 LOW
0001E2r 1  8E 0C 98       stx PCR
0001E5r 1  FA             plx
0001E6r 1  60             rts
0001E7r 1               
0001E7r 1               
